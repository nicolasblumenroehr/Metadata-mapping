{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "http://www.example.org/schema/json",
    "title": "MRI metadata for ML",
    "description": "Information from a Magnetic Resonance Imaging DICOM file, applicable to machine-learning",
    "required": [
        "studyName",
        "studyLocation",
        "series"
    ],
    "type": "object",
    "properties": {
        "studyName": {
            "title": "Study Name",
            "description": "Name of the study",
            "type": "string"
        },
        "studyLocation": {
            "title": "Study Location",
            "description": "Location of the study",
            "type": "string",
            "format": "uri"
        },
        "series": {
            "title": "Series",
            "description": "An `array` of Series objects that belong to the study",
            "type": "array",
            "minItems": 1,
            "items": {
                "title": "series",
                "description": "A series of the referenced study",
                "type": "object",
                "properties": {
                    "seriesName": {
                        "title": "seriesName",
                        "description": "Unique name of the series",
                        "type": "string"
                    },
                    "seriesLocation": {
                        "title": "seriesLocation",
                        "description": "Location where the DICOM file of the series has been deposited",
                        "type": "string",
                        "format": "uri"
                    },
                    "numberOfImages": {
                        "title": "numberOfImages",
                        "description": "Number of images in this DICOM file",
                        "type": "integer"
                    },
                    "imageProperties": {
                        "title": "imageProperties",
                        "description": "Series specific image properties",
                        "required": [
                            "perImage",
                            "allImages"
                        ],
                        "type": "object",
                        "properties": {
                            "perImage": {
                                "title": "perImage",
                                "description": "Attributes that apply on a per image basis in the series",
                                "type": "array",
                                "items": {
                                    "required": [
                                        "imageNumber",
                                        "imageSize",
                                        "pixelRange"
                                    ],
                                    "type": "object",
                                    "properties": {
                                        "imageNumber": {
                                            "title": "imageNumber",
                                            "description": "Position of the image in the series",
                                            "type": "integer"
                                        },
                                        "positionParameters": {
                                            "title": "positionParameters",
                                            "description": "The x, y, and z coordinates of the upper left hand corner (center of the first voxel transmitted) of the image",
                                            "type": "array",
                                            "items": {
                                                "type": "number"
                                            }
                                        },
                                        "convertedFormat": {
                                            "title": "convertedFormat",
                                            "description": "Formats the images in the DICOM file were converted to for feeding to a machine-learning algorithm",
                                            "type": "string"
                                        },
                                        "imageSize": {
                                            "title": "imageSize",
                                            "description": "How many pixels the image has along the rows and columns",
                                            "type": "object",
                                            "properties": {
                                                "pixelsPerRow": {
                                                    "type": "integer"
                                                },
                                                "pixelsPerColumn": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "pixelRange": {
                                            "title": "pixelRange",
                                            "description": "The minimum and maximum values of the pixel array in this image",
                                            "type": "object",
                                            "properties": {
                                                "minimum": {
                                                    "type": "integer"
                                                },
                                                "maximum": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "allImages": {
                                "title": "allImages",
                                "description": "Attributes that apply to all images in the series",
                                "required": [
                                    "sliceThickness"
                                ],
                                "type": "object",
                                "properties": {
                                    "imageOrientation": {
                                        "title": "imageOrientation",
                                        "description": "The direction cosines of the first row and the first column with respect to the sample",
                                        "type": "number"
                                    },
                                    "pixelSpacing": {
                                        "title": "pixelSpacing",
                                        "description": "Physical distance in the sample between the center of each pixel, specified by a numeric pair - adjacent row spacing (delimiter) adjacent column spacing in mm",
                                        "type": "number"
                                    },
                                    "sliceThickness": {
                                        "title": "sliceThickness",
                                        "description": "Nominal slice thickness, in mm",
                                        "type": "number"
                                    }
                                }
                            }
                        }
                    },
                    "featureProperties": {
                        "title": "features",
                        "description": "The input features of the series for the machine-learning algorithm",
                        "type": "object",
                        "properties": {
                            "echoTime": {
                                "title": "echoTime",
                                "description": "Time in ms between the middle of the excitation pulse and the peak of the echo produced (kx=0)",
                                "type": "number"
                            },
                            "repetitionTime": {
                                "title": "repetitionTime",
                                "description": "The period of time in ms between the beginning of a pulse sequence and the beginning of the succeeding (essentially identical) pulse sequence",
                                "type": "number"
                            },
                            "flipAngle": {
                                "title": "flipAngle",
                                "description": "Steady state angle in degrees to which the magnetic vector is flipped from the magnetic vector of the primary field",
                                "type": "integer"
                            }
                        },
                        "additionalProperties": true
                    },
                    "labelProperties": {
                        "title": "labels",
                        "description": "The labels of the series for the machine-learning algorithm",
                        "type": "object",
                        "properties": {
                            "imageArray": {
                                "title": "imageArray",
                                "description": "Pixel array of the images within the series",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "imageNumber": {
                                            "title": "imageNumber",
                                            "description": "Position of the image in the series",
                                            "type": "integer"
                                        },
                                        "pixelArray": {
                                            "title": "pixelArray",
                                            "description": "The rows of the image pixels, containing the pixel intensities",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "pixelIntensity": {
                                                        "title": "pixelIntensity",
                                                        "description": "The intensities of the pixels",
                                                        "type": "integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "additionalProperties": true
                    }
                }
            }
        }
    }
}
